{"version":3,"sources":["Editor.js"],"names":["define","declare","_WidgetBase","_TemplatedMixin","_WidgetsInTemplateMixin","lang","domConstruct","topic","aspect","template","i18n","templateString","widgetsInTemplate","editor","isEdit","mapClickMode","postCreate","this","inherited","arguments","own","subscribe","hitch","parentWidget","toggleable","after","onLayoutChange","open","toggleEditing","endEditing","publish","ops","clone","settings","map","layerInfos","con","create","innerHTML","style","containerNode","require","Editor","startup","toggleBTN","set","labels","stopEditing","destroyRecursive","startEditing","setMapClickMode","mode"],"mappings":";;;;;AAAAA,QACI,qBACA,oBACA,wBACA,gCACA,kBACA,qBACA,aACA,cACA,2CACA,kCAEA,qBACD,SAAUC,EAASC,EAAaC,EAAiBC,EAAyBC,EAAMC,EAAcC,EAAOC,EAAQC,EAAUC,GAEtH,MAAOT,IAASC,EAAaC,EAAiBC,IAC1CO,eAAgBF,EAChBC,KAAMA,EACNE,mBAAmB,EACnBC,OAAQ,KACRC,QAAQ,EACRC,aAAc,KACdC,WAAY,WACRC,KAAKC,UAAUC,WACfF,KAAKG,IAAIb,EAAMc,UAAU,0BAA2BhB,EAAKiB,MAAML,KAAM,qBACjEA,KAAKM,cAAgBN,KAAKM,aAAaC,YACvCP,KAAKG,IAAIZ,EAAOiB,MAAMR,KAAKM,aAAc,SAAUlB,EAAKiB,MAAML,KAAM,WAChEA,KAAKS,eAAeT,KAAKM,aAAaI,WAIlDC,cAAe,WACX,GAAKX,KAAKH,OAsBNG,KAAKY,aACLtB,EAAMuB,QAAQ,+BAvBA,CACd,GAAIC,GAAM1B,EAAK2B,MAAMf,KAAKgB,SAC1BF,GAAIG,IAAMjB,KAAKiB,IACfH,EAAII,WAAalB,KAAKkB,UAEtB,IAAIC,GAAM9B,EAAa+B,OAAO,OAC1BC,UAAW,84EACXC,MAAS,sBACVtB,KAAKuB,cAAe,OAEvBC,UAAS,6BAA8BpC,EAAKiB,MAAML,KAAM,SAAUyB,GAC9DzB,KAAKJ,OAAS,GAAI6B,IACdT,SAAUF,GACXK,GACHnB,KAAKJ,OAAO8B,aAGhB1B,KAAK2B,UAAUC,IAAI,QAAS5B,KAAKP,KAAKoC,OAAOC,aAC7C9B,KAAK2B,UAAUC,IAAI,QAAS,UAC5B5B,KAAKH,QAAS,EACdP,EAAMuB,QAAQ,0BAA2B,YAMjDD,WAAY,WACJZ,KAAKJ,QAAUI,KAAKJ,OAAOmC,kBAC3B/B,KAAKJ,OAAOmC,mBAEhB/B,KAAK2B,UAAUC,IAAI,QAAS5B,KAAKP,KAAKoC,OAAOG,cAC7ChC,KAAK2B,UAAUC,IAAI,QAAS,WAC5B5B,KAAKH,QAAS,EACdG,KAAKJ,OAAS,MAGlBa,eAAgB,SAAUC,GAEjBA,GAA8B,WAAtBV,KAAKF,eACdE,KAAKY,aACLtB,EAAMuB,QAAQ,6BAGtBoB,gBAAiB,SAAUC,GACvBlC,KAAKF,aAAeoC,EACP,WAATA,GACAlC,KAAKY","file":"Editor.js","sourcesContent":["define([\r\n    'dojo/_base/declare',\r\n    'dijit/_WidgetBase',\r\n    'dijit/_TemplatedMixin',\r\n    'dijit/_WidgetsInTemplateMixin',\r\n    'dojo/_base/lang',\r\n    'dojo/dom-construct',\r\n    'dojo/topic',\r\n    'dojo/aspect',\r\n    'dojo/text!./Editor/templates/Editor.html',\r\n    'dojo/i18n!./Editor/nls/resource',\r\n\r\n    'dijit/form/Button'\r\n], function (declare, _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin, lang, domConstruct, topic, aspect, template, i18n) {\r\n\r\n    return declare([_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin], {\r\n        templateString: template,\r\n        i18n: i18n,\r\n        widgetsInTemplate: true,\r\n        editor: null,\r\n        isEdit: false,\r\n        mapClickMode: null,\r\n        postCreate: function () {\r\n            this.inherited(arguments);\r\n            this.own(topic.subscribe('mapClickMode/currentSet', lang.hitch(this, 'setMapClickMode')));\r\n            if (this.parentWidget && this.parentWidget.toggleable) {\r\n                this.own(aspect.after(this.parentWidget, 'toggle', lang.hitch(this, function () {\r\n                    this.onLayoutChange(this.parentWidget.open);\r\n                })));\r\n            }\r\n        },\r\n        toggleEditing: function () {\r\n            if (!this.isEdit) {\r\n                var ops = lang.clone(this.settings);\r\n                ops.map = this.map;\r\n                ops.layerInfos = this.layerInfos;\r\n\r\n                var con = domConstruct.create('div', {\r\n                    innerHTML: '<img style=\"display:inline;\" src=\"data:image/gif;base64,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\"/>',\r\n                    'style': 'text-align:center;'\r\n                }, this.containerNode, 'only');\r\n\r\n                require(['esri/dijit/editing/Editor'], lang.hitch(this, function (Editor) {\r\n                    this.editor = new Editor({\r\n                        settings: ops\r\n                    }, con);\r\n                    this.editor.startup();\r\n                }));\r\n\r\n                this.toggleBTN.set('label', this.i18n.labels.stopEditing);\r\n                this.toggleBTN.set('class', 'danger');\r\n                this.isEdit = true;\r\n                topic.publish('mapClickMode/setCurrent', 'editor');\r\n            } else {\r\n                this.endEditing();\r\n                topic.publish('mapClickMode/setDefault');\r\n            }\r\n        },\r\n        endEditing: function () {\r\n            if (this.editor && this.editor.destroyRecursive) {\r\n                this.editor.destroyRecursive();\r\n            }\r\n            this.toggleBTN.set('label', this.i18n.labels.startEditing);\r\n            this.toggleBTN.set('class', 'success');\r\n            this.isEdit = false;\r\n            this.editor = null;\r\n        },\r\n\r\n        onLayoutChange: function (open) {\r\n            // end edit on close of title pane\r\n            if (!open && this.mapClickMode === 'editor') {\r\n                this.endEditing();\r\n                topic.publish('mapClickMode/setDefault');\r\n            }\r\n        },\r\n        setMapClickMode: function (mode) {\r\n            this.mapClickMode = mode;\r\n            if (mode !== 'editor') {\r\n                this.endEditing();\r\n            }\r\n        }\r\n    });\r\n});"]}