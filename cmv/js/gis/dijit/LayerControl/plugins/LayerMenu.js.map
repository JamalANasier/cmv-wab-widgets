{"version":3,"sources":["LayerMenu.js"],"names":["define","declare","Menu","MenuItem","PopupMenuItem","MenuSeparator","Transparency","i18n","control","_removed","postCreate","this","inherited","arguments","layer","controlOptions","controller","layerType","_layerType","self","vectorReorder","overlayReorder","_reorderUp","label","moveUp","onClick","_moveUp","addChild","_reorderDown","moveDown","_moveDown","_dynamicToggleMenuItems","noZoom","zoomTo","_zoomToLayer","noTransparency","transparency","swipe","swipeMenu","layerSwipeVertical","_swipeLayer","layerSwipeHorizontal","swipeScope","layerSwipeScope","layerSwipe","popup","metadataUrl","url","metadata","window","open","lastChild","getChildren","length","isInstanceOf","removeChild"],"mappings":";;;;;AAAAA,QACI,qBACA,aACA,iBACA,sBACA,sBACA,iBACA,+BACD,SACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAON,GAAQC,GACXM,QAAS,KACTC,UAAU,EACVC,WAAY,WACRC,KAAKC,UAAUC,UACf,IAAIL,GAAUG,KAAKH,QACfM,EAAQN,EAAQM,MAChBC,EAAiBP,EAAQO,eACzBC,EAAaR,EAAQQ,WACrBC,EAAYT,EAAQU,WACpBC,EAAOR,IAwCX,KAtCmB,WAAdM,GAA0BD,EAAWI,eAAiC,YAAdH,GAA2BD,EAAWK,kBAC/Fb,EAAQc,WAAa,GAAInB,IACrBoB,MAAOhB,EAAKiB,OACZC,QAAS,WACLT,EAAWU,QAAQlB,MAG3BW,EAAKQ,SAASnB,EAAQc,YACtBd,EAAQoB,aAAe,GAAIzB,IACvBoB,MAAOhB,EAAKsB,SACZJ,QAAS,WACLT,EAAWc,UAAUtB,MAG7BW,EAAKQ,SAASnB,EAAQoB,cACtBT,EAAKQ,SAAS,GAAItB,KAGlBG,EAAQuB,yBACRvB,EAAQuB,wBAAwBZ,IAG/BJ,EAAeiB,UAAW,GAAQhB,EAAWgB,UAAW,GAAUhB,EAAWgB,UAAW,GAAQjB,EAAeiB,UAAW,IAC3Hb,EAAKQ,SAAS,GAAIxB,IACdoB,MAAOhB,EAAK0B,OACZR,QAAS,WACLT,EAAWkB,aAAapB,QAK/BC,EAAeoB,kBAAmB,GAAQnB,EAAWmB,kBAAmB,GAAUnB,EAAWmB,kBAAmB,GAAQpB,EAAeoB,kBAAmB,IAC3JhB,EAAKQ,SAAS,GAAIrB,IACdiB,MAAOhB,EAAK6B,aACZtB,MAAOA,KAIXC,EAAesB,SAAU,GAASrB,EAAWqB,SAAU,GAAQtB,EAAesB,SAAU,EAAQ,CAChG,GAAIC,GAAY,GAAIpC,EACpBoC,GAAUX,SAAS,GAAIxB,IACnBoB,MAAOhB,EAAKgC,mBACZd,QAAS,WACLT,EAAWwB,YAAY1B,EAAO,gBAGtCwB,EAAUX,SAAS,GAAIxB,IACnBoB,MAAOhB,EAAKkC,qBACZhB,QAAS,WACLT,EAAWwB,YAAY1B,EAAO,kBAGlCC,EAAe2B,cAAe,GAC9BJ,EAAUX,SAAS,GAAIxB,IACnBoB,MAAOhB,EAAKoC,gBACZlB,QAAS,WACLT,EAAWwB,YAAY1B,EAAO,aAI1CK,EAAKQ,SAAS,GAAIvB,IACdmB,MAAOhB,EAAKqC,WACZC,MAAOP,KAKXvB,EAAe+B,eAAgB,GAAQhC,EAAMiC,MAC7C5B,EAAKQ,SAAS,GAAItB,IAClBc,EAAKQ,SAAS,GAAIxB,IACdoB,MAAOhB,EAAKyC,SACZvB,QAAS,WACLwB,OAAOC,KAAKpC,EAAMiC,IAAK,eAK/BhC,EAAe+B,aAAqD,gBAA/B/B,GAAe+B,cACpD3B,EAAKQ,SAAS,GAAItB,IAClBc,EAAKQ,SAAS,GAAIxB,IACdoB,MAAOhB,EAAKyC,SACZvB,QAAS,WACLwB,OAAOC,KAAKnC,EAAe+B,YAAa,cAKpD,IAAIK,GAAYhC,EAAKiC,cAAcjC,EAAKiC,cAAcC,OAAS,EAC3DF,IAAaA,EAAUG,aAAajD,IACpCc,EAAKoC,YAAYJ","file":"LayerMenu.js","sourcesContent":["define([\r\n    'dojo/_base/declare',\r\n    'dijit/Menu',\r\n    'dijit/MenuItem',\r\n    'dijit/PopupMenuItem',\r\n    'dijit/MenuSeparator',\r\n    './Transparency',\r\n    'dojo/i18n!./../nls/resource'\r\n], function (\r\n    declare,\r\n    Menu,\r\n    MenuItem,\r\n    PopupMenuItem,\r\n    MenuSeparator,\r\n    Transparency,\r\n    i18n\r\n) {\r\n    return declare(Menu, {\r\n        control: null,\r\n        _removed: false, //for future use\r\n        postCreate: function () {\r\n            this.inherited(arguments);\r\n            var control = this.control,\r\n                layer = control.layer,\r\n                controlOptions = control.controlOptions,\r\n                controller = control.controller,\r\n                layerType = control._layerType,\r\n                self = this;\r\n            //reorder menu items\r\n            if ((layerType === 'vector' && controller.vectorReorder) || (layerType === 'overlay' && controller.overlayReorder)) {\r\n                control._reorderUp = new MenuItem({\r\n                    label: i18n.moveUp,\r\n                    onClick: function () {\r\n                        controller._moveUp(control);\r\n                    }\r\n                });\r\n                self.addChild(control._reorderUp);\r\n                control._reorderDown = new MenuItem({\r\n                    label: i18n.moveDown,\r\n                    onClick: function () {\r\n                        controller._moveDown(control);\r\n                    }\r\n                });\r\n                self.addChild(control._reorderDown);\r\n                self.addChild(new MenuSeparator());\r\n            }\r\n            // toggle all dynamic sublayers\r\n            if (control._dynamicToggleMenuItems) {\r\n                control._dynamicToggleMenuItems(self);\r\n            }\r\n            //zoom to layer\r\n            if ((controlOptions.noZoom !== true && controller.noZoom !== true) || (controller.noZoom === true && controlOptions.noZoom === false)) {\r\n                self.addChild(new MenuItem({\r\n                    label: i18n.zoomTo,\r\n                    onClick: function () {\r\n                        controller._zoomToLayer(layer);\r\n                    }\r\n                }));\r\n            }\r\n            //transparency\r\n            if ((controlOptions.noTransparency !== true && controller.noTransparency !== true) || (controller.noTransparency === true && controlOptions.noTransparency === false)) {\r\n                self.addChild(new Transparency({\r\n                    label: i18n.transparency,\r\n                    layer: layer\r\n                }));\r\n            }\r\n            //layer swipe\r\n            if (controlOptions.swipe === true || (controller.swipe === true && controlOptions.swipe !== false)) {\r\n                var swipeMenu = new Menu();\r\n                swipeMenu.addChild(new MenuItem({\r\n                    label: i18n.layerSwipeVertical,\r\n                    onClick: function () {\r\n                        controller._swipeLayer(layer, 'vertical');\r\n                    }\r\n                }));\r\n                swipeMenu.addChild(new MenuItem({\r\n                    label: i18n.layerSwipeHorizontal,\r\n                    onClick: function () {\r\n                        controller._swipeLayer(layer, 'horizontal');\r\n                    }\r\n                }));\r\n                if (controlOptions.swipeScope === true) {\r\n                    swipeMenu.addChild(new MenuItem({\r\n                        label: i18n.layerSwipeScope,\r\n                        onClick: function () {\r\n                            controller._swipeLayer(layer, 'scope');\r\n                        }\r\n                    }));\r\n                }\r\n                self.addChild(new PopupMenuItem({\r\n                    label: i18n.layerSwipe,\r\n                    popup: swipeMenu\r\n                }));\r\n            }\r\n            // metadata link\r\n            // service url\r\n            if (controlOptions.metadataUrl === true && layer.url) {\r\n                self.addChild(new MenuSeparator());\r\n                self.addChild(new MenuItem({\r\n                    label: i18n.metadata,\r\n                    onClick: function () {\r\n                        window.open(layer.url, '_blank');\r\n                    }\r\n                }));\r\n            }\r\n            // custom url\r\n            if (controlOptions.metadataUrl && typeof controlOptions.metadataUrl === 'string') {\r\n                self.addChild(new MenuSeparator());\r\n                self.addChild(new MenuItem({\r\n                    label: i18n.metadata,\r\n                    onClick: function () {\r\n                        window.open(controlOptions.metadataUrl, '_blank');\r\n                    }\r\n                }));\r\n            }\r\n            //if last child is a separator remove it\r\n            var lastChild = self.getChildren()[self.getChildren().length - 1];\r\n            if (lastChild && lastChild.isInstanceOf(MenuSeparator)) {\r\n                self.removeChild(lastChild);\r\n            }\r\n        }\r\n    });\r\n});\r\n"]}