{"version":3,"sources":["_ConfigMixin.js"],"names":["define","declare","lang","Deferred","initConfigAsync","returnDeferred","file","s","window","location","search","q","match","length","indexOf","require","config","resolve","initConfigSuccess","this","createWidgets","isDebug","app","mapClickMode","current","defaultMapClickMode","defaultMode","initLayout","initMapAsync","then","hitch","initConfigError","err","handleError","source","error"],"mappings":";;;;;AAAAA,QACI,qBACA,kBACA,iBACD,SACCC,EACAC,EACAC,GAGA,MAAOF,GAAQ,MAEXG,gBAAiB,WACb,GAAIC,GAAiB,GAAIF,GAErBG,EAAO,gBACPC,EAAIC,OAAOC,SAASC,OACpBC,EAAIJ,EAAEK,MAAM,kBAUhB,OATID,IAAKA,EAAEE,OAAS,IAChBP,EAAOK,EAAE,GACLL,EAAKQ,QAAQ,KAAO,IACpBR,EAAO,UAAYA,IAG3BS,SAAST,GAAO,SAAUU,GACtBX,EAAeY,QAAQD,KAEpBX,GAGXa,kBAAmB,SAAUF,GACzBG,KAAKH,OAASA,EAGdG,KAAKC,eAAe,YAEhBJ,EAAOK,UACPb,OAAOc,IAAMH,MAIjBA,KAAKI,cACDC,QAASR,EAAOS,oBAChBC,YAAaV,EAAOS,qBAIxBN,KAAKQ,aAGLR,KAAKC,eAAe,WAGpBD,KAAKS,eAAeC,KAChB3B,EAAK4B,MAAMX,KAAM,mBACjBjB,EAAK4B,MAAMX,KAAM,kBAIzBY,gBAAiB,SAAUC,GACvBb,KAAKc,aACDC,OAAQ,aACRC,MAAOH","file":"_ConfigMixin.js","sourcesContent":["define([\r\n    'dojo/_base/declare',\r\n    'dojo/_base/lang',\r\n    'dojo/Deferred'\r\n], function (\r\n    declare,\r\n    lang,\r\n    Deferred\r\n) {\r\n\r\n    return declare(null, {\r\n\r\n        initConfigAsync: function () {\r\n            var returnDeferred = new Deferred();\r\n            // get the config file from the url if present\r\n            var file = 'config/viewer',\r\n                s = window.location.search,\r\n                q = s.match(/config=([^&]*)/i);\r\n            if (q && q.length > 0) {\r\n                file = q[1];\r\n                if (file.indexOf('/') < 0) {\r\n                    file = 'config/' + file;\r\n                }\r\n            }\r\n            require([file], function (config) {\r\n                returnDeferred.resolve(config);\r\n            });\r\n            return returnDeferred;\r\n        },\r\n\r\n        initConfigSuccess: function (config) {\r\n            this.config = config;\r\n\r\n            // in _WidgetsMixin\r\n            this.createWidgets(['loading']);\r\n\r\n            if (config.isDebug) {\r\n                window.app = this; //dev only\r\n            }\r\n\r\n            // setup the map click mode\r\n            this.mapClickMode = {\r\n                current: config.defaultMapClickMode,\r\n                defaultMode: config.defaultMapClickMode\r\n            };\r\n\r\n            // in _LayoutMixin\r\n            this.initLayout();\r\n\r\n            // in _WidgetsMixin\r\n            this.createWidgets(['layout']);\r\n\r\n            // in _MapMixin\r\n            this.initMapAsync().then(\r\n                lang.hitch(this, 'initMapComplete'),\r\n                lang.hitch(this, 'initMapError')\r\n            );\r\n        },\r\n\r\n        initConfigError: function (err) {\r\n            this.handleError({\r\n                source: 'Controller',\r\n                error: err\r\n            });\r\n        }\r\n    });\r\n});"]}