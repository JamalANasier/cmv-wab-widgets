{"version":3,"sources":["Growler.js"],"names":["define","declare","_WidgetBase","_TemplatedMixin","lang","Style","domConstruct","fx","domClass","topic","Growl","templateString","title","message","level","timeout","opacity","_container","_timer","postCreate","this","inherited","arguments","set","domNode","place","growlMessageNode","innerHTML","anim","setTimeout","publish","source","error","hitch","hoverOver","clearInterval","add","hoverOut","remove","close","height","margin","partial","destroy","Growler","own","subscribe","growl","props","mixin","containerNode","g","startup"],"mappings":";;;;;AAAAA,QACI,qBACA,oBACA,wBACA,kBACA,iBACA,qBACA,gBACA,iBACA,aACA,wCACD,SAAUC,EAASC,EAAaC,EAAiBC,EAAMC,EAAOC,EAAcC,EAAIC,EAAUC,GAGzF,GAAIC,GAAQT,GAASC,EAAaC,IAC9BQ,eAAgB,8LAChBC,MAAO,QACPC,QAAS,UACTC,MAAO,UACPC,QAAS,IACTC,QAAS,EACTC,WAAY,KACZC,OAAQ,KACRC,WAAY,WACRC,KAAKC,UAAUC,WACXF,KAAKH,YACLZ,EAAMkB,IAAIH,KAAKI,QAAS,UAAW,GACnClB,EAAamB,MAAML,KAAKI,QAASJ,KAAKH,YACtCG,KAAKM,iBAAiBC,UAAYP,KAAKP,QACvCN,EAAGqB,KAAKR,KAAKI,SACTR,QAASI,KAAKJ,SACf,KACHI,KAAKS,cAELpB,EAAMqB,QAAQ,sBACVC,OAAQ,UACRC,MAAO,0CAInBH,WAAY,WACJT,KAAKL,QAAU,IACfK,KAAKF,OAASW,WAAWzB,EAAK6B,MAAMb,KAAM,SAAUA,KAAKL,WAGjEmB,UAAW,WACPC,cAAcf,KAAKF,QACnBV,EAAS4B,IAAIhB,KAAKI,QAAS,UAE/Ba,SAAU,WACFjB,KAAKL,QAAU,GACfK,KAAKS,aAETrB,EAAS8B,OAAOlB,KAAKI,QAAS,UAElCe,MAAO,WACHhC,EAAGqB,KAAKR,KAAKI,SACTR,QAAS,GACV,IAAK,KAAMZ,EAAK6B,MAAMb,KAAM,YAEnCkB,OAAQ,WACJ/B,EAAGqB,KAAKR,KAAKI,SACTgB,OAAQ,EACRC,OAAQ,GACT,IAAK,KAAMrC,EAAKsC,QAAQpC,EAAaqC,QAASvB,KAAKI,aAK1DoB,EAAU3C,GAASC,EAAaC,IAChCQ,eAAgB,6EAChBQ,WAAY,WACRC,KAAKC,UAAUC,WACfF,KAAKyB,IAAIpC,EAAMqC,UAAU,gBAAiB1C,EAAK6B,MAAMb,KAAM,YAE/D2B,MAAO,SAAUC,GACbA,EAAQA,MACR5C,EAAK6C,MAAMD,GACP/B,WAAYG,KAAK8B,eAErB,IAAIC,GAAI,GAAIzC,GAAMsC,EAClBG,GAAEC,YAIV,OAAOR","file":"Growler.js","sourcesContent":["define([\r\n    'dojo/_base/declare',\r\n    'dijit/_WidgetBase',\r\n    'dijit/_TemplatedMixin',\r\n    'dojo/_base/lang',\r\n    'dojo/dom-style',\r\n    'dojo/dom-construct',\r\n    'dojo/_base/fx',\r\n    'dojo/dom-class',\r\n    'dojo/topic',\r\n    'xstyle/css!./Growler/css/Growler.css'\r\n], function (declare, _WidgetBase, _TemplatedMixin, lang, Style, domConstruct, fx, domClass, topic) {\r\n\r\n    // the growl itself\r\n    var Growl = declare([_WidgetBase, _TemplatedMixin], {\r\n        templateString: '<div class=\"growl ${level}\" data-dojo-attach-event=\"onmouseover:hoverOver,onmouseout:hoverOut,onclick:close\"><h3>${title}</h3><span data-dojo-attach-point=\"growlMessageNode\"></span></div>',\r\n        title: 'Title',\r\n        message: 'Message',\r\n        level: 'default',\r\n        timeout: 10000,\r\n        opacity: 1.0,\r\n        _container: null,\r\n        _timer: null,\r\n        postCreate: function () {\r\n            this.inherited(arguments);\r\n            if (this._container) {\r\n                Style.set(this.domNode, 'opacity', 0);\r\n                domConstruct.place(this.domNode, this._container);\r\n                this.growlMessageNode.innerHTML = this.message;\r\n                fx.anim(this.domNode, {\r\n                    opacity: this.opacity\r\n                }, 250);\r\n                this.setTimeout();\r\n            } else {\r\n                topic.publish('viewer/handleError', {\r\n                    source: 'Growler',\r\n                    error: 'Growl container not found/specified.'\r\n                });\r\n            }\r\n        },\r\n        setTimeout: function () {\r\n            if (this.timeout > 0) {\r\n                this._timer = setTimeout(lang.hitch(this, 'close'), this.timeout);\r\n            }\r\n        },\r\n        hoverOver: function () {\r\n            clearInterval(this._timer);\r\n            domClass.add(this.domNode, 'hover');\r\n        },\r\n        hoverOut: function () {\r\n            if (this.timeout > 0) {\r\n                this.setTimeout();\r\n            }\r\n            domClass.remove(this.domNode, 'hover');\r\n        },\r\n        close: function () {\r\n            fx.anim(this.domNode, {\r\n                opacity: 0\r\n            }, 500, null, lang.hitch(this, 'remove'));\r\n        },\r\n        remove: function () {\r\n            fx.anim(this.domNode, {\r\n                height: 0,\r\n                margin: 0\r\n            }, 250, null, lang.partial(domConstruct.destroy, this.domNode));\r\n        }\r\n    });\r\n\r\n    // main growler dijit container\r\n    var Growler = declare([_WidgetBase, _TemplatedMixin], {\r\n        templateString: '<div class=\"gis-dijit-Growl\" data-dojo-attach-point=\"containerNode\"></div>',\r\n        postCreate: function () {\r\n            this.inherited(arguments);\r\n            this.own(topic.subscribe('growler/growl', lang.hitch(this, 'growl')));\r\n        },\r\n        growl: function (props) {\r\n            props = props || {};\r\n            lang.mixin(props, {\r\n                _container: this.containerNode\r\n            });\r\n            var g = new Growl(props);\r\n            g.startup();\r\n        }\r\n    });\r\n\r\n    return Growler;\r\n});"]}