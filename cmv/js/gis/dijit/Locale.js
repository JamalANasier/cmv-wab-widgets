/*  ConfigurableMapViewerCMV
 *  version 2.0.0-beta.1
 *  Project: http://cmv.io/
 */

define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/_base/lang","dojo/on","dojo/dom-style","dojo/_base/array","dojo/_base/kernel","dojo/io-query","dijit/form/DropDownButton","dijit/DropDownMenu","dijit/MenuItem","./Locale/countries","dojo/text!./Locale/templates/Locale.html","dojo/i18n!./Locale/nls/resource","xstyle/css!https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.3.1/css/flag-icon.min.css","xstyle/css!./Locale/css/Locale.css"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a([b,c],{templateString:n,i18n:o,baseClass:"cmvLocaleDijit",currentLocale:null,includeFlag:!0,includeCountry:!0,includeLanguage:!0,languages:{en:"English",es:"Español",fr:"Français",pt:"Português"},locales:["es-ar","es-bo","pt-br","en-ca","fr-ca","es-cl","es-co","es-cr","es-do","es-ec","es-sv","fr-FR","es-gt","fr-ht","es-hn","en-in","es-mx","es-pa","es-pe","es-pr","pt-pt","es-py","es-es","en-gb","en-us","es-us","es-uy","es-ve"],postCreate:function(){this.inherited(arguments),this.currentLocale=h.locale,this.parentWidget&&this.parentWidget.toggleable&&f.set(this.localeLabelContainer,"display","block");var a=new k({baseClass:"localeMenu"});g.forEach(this.locales,d.hitch(this,function(b){var c=b.split("-"),e=this.languages[c[0]];if(e){var f="",g=null,h=null;c[1]&&(this.includeFlag&&(h="flag-icon flag-icon-"+c[1].toLowerCase()),g=m[c[1].toUpperCase()],g&&this.includeCountry&&(f=g)),this.includeLanguage&&(f.length>0&&(f+=" - "),f+=e);var i=new l({id:b,label:f,iconClass:h,onClick:d.hitch(this,"switchLocale",b)});a.addChild(i)}})),a.startup();var b=this.currentLocale.split("-"),c=this.languages[b[0]],e="",i=null;b[1]&&(this.includeFlag&&(e='<div class="flag-icon flag-icon-'+b[1].toLowerCase()+'"></div>'),i=m[b[1].toUpperCase()],i&&this.includeCountry&&(e+=i),this.includeLanguage&&(i&&this.includeCountry&&(e+=" - "),e+=c));var n=new j({label:e,dropDown:a});this.localeDropDownContainer.appendChild(n.domNode)},switchLocale:function(a){if(a!==this.currentLocale){var b=window.location.href,c={};if(b.indexOf("?")>-1){var d=b.substring(b.indexOf("?")+1,b.length);c=i.queryToObject(d)}c.locale=a,window.location=window.location.pathname+"?"+i.objectToQuery(c)}}})});
//# sourceMappingURL=Locale.js.map