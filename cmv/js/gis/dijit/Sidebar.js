/*  ConfigurableMapViewerCMV
 *  version 2.0.0-beta.1
 *  Project: http://cmv.io/
 */

define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/_base/lang","dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/on","dojo/aspect","put-selector/put","dojo/text!./Sidebar/templates/Sidebar.html","xstyle/css!./Sidebar/css/Sidebar.css"],function(a,b,c,d,e,f,g,h,i,j,k){return a([b,c],{templateString:k,baseClass:"sidebar",defaultTabParams:{tabIcon:"fa-bars",tabTitle:"Title"},viewPadding:{top:0,left:0,right:0,bottom:0},showCloseIcon:!0,collapseSyncNode:null,postCreate:function(){this.inherited(arguments),this.init()},init:function(){this.tabs=[],this.collapseSyncNode&&(f.contains(this.domNode,"collapsed")&&j(this.collapseSyncNode,".collapsed"),h(this.collapseSyncNode,"transitionend, oTransitionEnd, webkitTransitionEnd, animationend, webkitAnimationEnd",d.hitch(this,"_setViewPadding"))),i.before(this.map,"setExtent",d.hitch(this,"_viewPaddingHandler"))},createTab:function(a){a=d.mixin(d.clone(this.defaultTabParams),a||{});var b={buttonNode:null,containerNode:null,closeBtnNode:null};return b.buttonNode=j(this.tabsButtonNode,"li a[role=tab] i.fa."+a.iconClass+"<<"),b.containerNode=j(this.tabsContainerNode,"div."+this.baseClass+"-pane div.sidebar-pane-title $ <",a.title),this.showCloseIcon&&(b.closeBtnNode=j(b.containerNode,"i.fa.fa-times.closeIcon"),h(b.closeBtnNode,"click",d.hitch(this,"tabClickHandler",b))),h(b.buttonNode,"click",d.hitch(this,"tabClickHandler",b)),this.tabs.push(b),b},tabClickHandler:function(a){f.contains(a.buttonNode,"active")?this.closeTab(a):this.openTab(a)},_setViewPadding:function(){var a=g.getContentBox(this.domNode);this.viewPadding={top:0,left:a.w+a.l,right:0,bottom:0},this._viewPaddingHandler(this.map.extent)},_viewPaddingHandler:function(a){var b=this.map,c=this.viewPadding,d=b.width-c.left-c.right,e=b.height-c.top-c.bottom,f=Math.max(a.getWidth()/d,a.getHeight()/e),g=a.getCenter(),h=b.extent.expand(f/(b.extent.getWidth()/b.width));return h=h.centerAt({x:g.x-.5*(c.left-c.right)*f,y:g.y-.5*(c.top-c.bottom)*f}),[h]},openTab:function(a){e.forEach(this.tabs,function(a){j(a.buttonNode,"!active"),j(a.containerNode,"!active")}),j(a.buttonNode,".active"),j(a.containerNode,".active"),j(this.tabsButtonNode,".active"),j(this.domNode,"!collapsed"),this.collapseSyncNode&&j(this.collapseSyncNode,"!collapsed")},closeTab:function(){e.forEach(this.tabs,function(a){j(a.buttonNode,"!active"),j(this.tabsButtonNode,"!active"),j(a.containerNode,"!active")},this),j(this.domNode,".collapsed"),this.collapseSyncNode&&j(this.collapseSyncNode,".collapsed")}})});
//# sourceMappingURL=Sidebar.js.map